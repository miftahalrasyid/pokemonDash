{"ast":null,"code":"import _slicedToArray from\"/Users/miftahalrasyid/Documents/kerja/personal/Tokopedia/pokeman/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/miftahalrasyid/Documents/kerja/personal/Tokopedia/pokeman/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React from\"react\";import{Link}from\"react-router-dom\";import{AppContext}from\"../App\";import'./PokemonDetail.css';// import {useCookies} from \"react-cookie\";\n// import styled from '@emotion/styled'\nimport{gql,useQuery}from'@apollo/client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GET_POKEMON=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  query pokemon($name: String!) {\\n    pokemon(name: $name){\\n        id\\n        name\\n        moves {\\n          move {\\n            name\\n          }\\n        }\\n        species{\\n            url\\n            name\\n        }\\n        types {\\n            slot\\n          type {\\n              url\\n            name\\n          }\\n        }\\n        sprites{\\n            front_default\\n          }\\n        message\\n        status\\n      }\\n  }\\n\"])));export var GetPokemonDetail=function GetPokemonDetail(prop){var match=prop.match;var overlay=React.useRef(null);var popup=React.useRef(null);var pokemonname=React.useRef(null);var failedPopup=React.useRef(null);// const [apolloPokemon,setApolloPokemon] = React.useState([])\n// console.log(match.params.type)\nvar gqlVariables={name:match.params.type};var _useQuery=useQuery(GET_POKEMON,{variables:gqlVariables}),error=_useQuery.error,data=_useQuery.data;if(error)console.log(\"Error! \".concat(error.message));React.useEffect(function(){// console.log(data?.pokemon || [])\n// setApolloPokemon(data?.pokemon || [])\n// console.log(apolloPokemon)\n// console.log(data?.pokemon?.sprites?.front_default || [])\nif((data===null||data===void 0?void 0:data.pokemon)||false){var _data$pokemon,_data$pokemon$species,_data$pokemon2,_data$pokemon2$sprite,_data$pokemon3,_data$pokemon4;if(window.innerWidth<window.innerHeight)document.querySelector(\".details\").style.height=\"36vh\";else document.querySelector(\".details\").style.width=document.documentElement.style.setProperty('--details-width',32+\"vw\");setPokemonSpecies((data===null||data===void 0?void 0:(_data$pokemon=data.pokemon)===null||_data$pokemon===void 0?void 0:(_data$pokemon$species=_data$pokemon.species)===null||_data$pokemon$species===void 0?void 0:_data$pokemon$species.name)||\"\");setPokemonImage((data===null||data===void 0?void 0:(_data$pokemon2=data.pokemon)===null||_data$pokemon2===void 0?void 0:(_data$pokemon2$sprite=_data$pokemon2.sprites)===null||_data$pokemon2$sprite===void 0?void 0:_data$pokemon2$sprite.front_default)||\"\");setPokemonMoves((data===null||data===void 0?void 0:(_data$pokemon3=data.pokemon)===null||_data$pokemon3===void 0?void 0:_data$pokemon3.moves)||[]);setPokemonTypes((data===null||data===void 0?void 0:(_data$pokemon4=data.pokemon)===null||_data$pokemon4===void 0?void 0:_data$pokemon4.types)||[]);}},[data]);// const [cookies] = useCookies(['name',\"mypokemon\"]);\nvar _React$useContext=React.useContext(AppContext),dispatch=_React$useContext.dispatch,cookies=_React$useContext.cookies;// const [pokemonDetail,setPokemonDetail] = React.useState(null)\nvar _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),pokemonMoves=_React$useState2[0],setPokemonMoves=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),pokemonTypes=_React$useState4[0],setPokemonTypes=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),pokemonImage=_React$useState6[0],setPokemonImage=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),pokemonSpecies=_React$useState8[0],setPokemonSpecies=_React$useState8[1];// const [randomNumber, setRandomNumber] = React.useState(false)\nvar gotchaClick=function gotchaClick(ev){var _cookies$mypokemon,_cookies$mypokemon2;ev.preventDefault();// console.log(cookies?.mypokemon?.filter(a=>a.name===pokemonname.value) || [])\nif(((cookies===null||cookies===void 0?void 0:(_cookies$mypokemon=cookies.mypokemon)===null||_cookies$mypokemon===void 0?void 0:_cookies$mypokemon.filter(function(a){return a.species===pokemonSpecies;}).length)||[])>0&&((cookies===null||cookies===void 0?void 0:(_cookies$mypokemon2=cookies.mypokemon)===null||_cookies$mypokemon2===void 0?void 0:_cookies$mypokemon2.filter(function(a){return a.name===pokemonname.value;}).length)||[])>0||pokemonname.value===\"\"){if(pokemonname.value===\"\"){alert(\"Name cannot be empty\");return;}alert(\"Please use another name\");}else if(pokemonname.value.length>10||false){alert(\"Name length must be less than 10 character\");}else{overlay.style.background=\"rgba(0,0,0,0)\";overlay.style.visibility=\"hidden\";popup.style.visibility=\"hidden\";// console.log(pokemonTypes.map((item)=>item.type.name))\ndispatch({type:\"myPokemon\",types:pokemonTypes.map(function(item){return item.type.name;}).toString(),species:pokemonSpecies,image:pokemonImage,hash:pokemonname.value});}// console.log(cookies.mypokemon.name.indexOf(pokemonname.value))\n};var failedClick=function failedClick(ev){ev.preventDefault();// console.log(cookies.mypokemon.filter(a=>a.name===pokemonname.value))\noverlay.style.background=\"rgba(0,0,0,0)\";overlay.style.visibility=\"hidden\";failedPopup.style.visibility=\"hidden\";// console.log(cookies.mypokemon.name.indexOf(pokemonname.value))\n};var catchItClick=function catchItClick(){console.log(\"catchit click\");/** 50% chance to get the item */var rand=Math.random()<0.5;console.log(rand);// setRandomNumber(Math.random() < 0.5)\nif(rand){/**get the pokemon */ // console.log(\"how many\")\npopup.style.visibility=\"visible\";overlay.style.visibility=\"visible\";overlay.style.background=\"rgba(0,0,0,0.7)\";// dispatch({type: \"myPokemon\", image:pokemonImage, hash: prompt(\"Congratulation, You catch the Pokemon!\", \"What do you want to name it?\")});\n// dispatch({type: \"myPokemon\", hash: \"What do you want to name it?\"});\n}else{/** didn't get the pokemon */failedPopup.style.visibility=\"visible\";overlay.style.visibility=\"visible\";overlay.style.background=\"rgba(0,0,0,0.7)\";}};// React.useEffect(()=>{\n//     if(randomNumber){\n//         /**get the pokemon */\n//         console.log(\"how many\")\n//         dispatch({type: \"myPokemon\", hash: prompt(\"Congratulation, You catch the Pokemon!\", \"What do you want to name it?\")});\n//         // dispatch({type: \"myPokemon\", hash: \"What do you want to name it?\"});\n//     }\n//     else{\n//         /** didn't get the pokemon */\n//     }\n// },[randomNumber])\nvar containerItem=React.useRef(null);// const [value, setValue] = React.useState(\"\");\n// const Element = ({animate}) =>{\n// }\n// React.useEffect(()=>{\n//     console.log(match)\n//     if(match)\n//     fetch(\"https://pokeapi.co/api/v2/pokemon/\"+match.params.type)\n//     .then(res=>res.json())\n//     .then(data=>{\n//         setPokemonDetail(data)\n//         if(window.innerWidth < window.innerHeight)\n//         document.querySelector(\".details\").style.height= \"36vh\";\n//         else\n//         document.querySelector(\".details\").style.width= document.documentElement.style.setProperty('--details-width', 32 + \"vw\");\n//     });\n// },[match])\n// React.useEffect(()=>{\n//     console.log(pokemonDetail)\n//     if(pokemonDetail){\n//         setPokemonSpecies(pokemonDetail.species.name);\n//         setPokemonImage(pokemonDetail.sprites.other['official-artwork'].front_default)\n//         setPokemonMoves(pokemonDetail.moves)\n//         setPokemonTypes(pokemonDetail.types)\n//     }\n//     // containerItem.style.height= \"36vh\";\n//     // document.querySelector(\".details\").style.height= \"36vh\";\n// },[pokemonDetail])\n// console.log(containerItem)\n// console.log(animate);\nReact.useEffect(function(){// console.log(\"render\")\nif(document.querySelector(\".details\")){// animate = \"false\";\n// containerItem.setAttribute(\"animated\",\"true\")\nif(window.innerWidth<window.innerHeight)containerItem.style.height=\"36vh\";else containerItem.style.width=document.documentElement.style.setProperty('--details-width',32+\"vw\");}// setValue({height: \"26vh\"})\n},[]);return/*#__PURE__*/_jsx(_Fragment,{children:match?/*#__PURE__*/_jsxs(\"div\",{className:\"details-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/pokedex\",children:/*#__PURE__*/_jsx(\"img\",{className:\"back-btn\",src:\"/images/left-arrow.png\",alt:\"close-btn\"})}),/*#__PURE__*/_jsx(\"h1\",{children:match?match.params.type:null}),/*#__PURE__*/_jsx(\"img\",{className:\"detail-img\",src:pokemonImage,alt:match.params.type+\".png\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay\",ref:function ref(el){return overlay=el;},children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup\",ref:function ref(el){return popup=el;},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:gotchaClick,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gotcha!\"}),/*#__PURE__*/_jsx(\"input\",{ref:function ref(el){return pokemonname=el;},placeholder:\"Please enter a name!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"failedpopup\",ref:function ref(el){return failedPopup=el;},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:failedClick,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PokeBall Failed\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"dismiss\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",ref:function ref(el){containerItem=el;},children:[/*#__PURE__*/_jsx(\"div\",{className:\"catch-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:catchItClick,children:/*#__PURE__*/_jsx(\"h3\",{children:\"Catch it!\"})})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Types\"}),pokemonTypes?pokemonTypes.map(function(item,idx){return/*#__PURE__*/_jsx(\"p\",{children:item.type.name},idx);}):null,/*#__PURE__*/_jsx(\"h3\",{children:\"Moves\"}),pokemonMoves?pokemonMoves.map(function(item,idx){return/*#__PURE__*/_jsx(\"p\",{children:item.move.name},idx);}):null]})]}):null});};export var PokemonDetail=function PokemonDetail(){return/*#__PURE__*/_jsx(_Fragment,{});};","map":{"version":3,"sources":["/Users/miftahalrasyid/Documents/kerja/personal/Tokopedia/pokeman/src/PokemonDetail/PokemonDetail.js"],"names":["React","Link","AppContext","gql","useQuery","GET_POKEMON","GetPokemonDetail","prop","match","overlay","useRef","popup","pokemonname","failedPopup","gqlVariables","name","params","type","variables","error","data","console","log","message","useEffect","pokemon","window","innerWidth","innerHeight","document","querySelector","style","height","width","documentElement","setProperty","setPokemonSpecies","species","setPokemonImage","sprites","front_default","setPokemonMoves","moves","setPokemonTypes","types","useContext","dispatch","cookies","useState","pokemonMoves","pokemonTypes","pokemonImage","pokemonSpecies","gotchaClick","ev","preventDefault","mypokemon","filter","a","length","value","alert","background","visibility","map","item","toString","image","hash","failedClick","catchItClick","rand","Math","random","containerItem","el","idx","move","PokemonDetail"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {AppContext} from \"../App\";\nimport './PokemonDetail.css';\n// import {useCookies} from \"react-cookie\";\n// import styled from '@emotion/styled'\nimport { gql, useQuery } from '@apollo/client';\nconst GET_POKEMON = gql`\n  query pokemon($name: String!) {\n    pokemon(name: $name){\n        id\n        name\n        moves {\n          move {\n            name\n          }\n        }\n        species{\n            url\n            name\n        }\n        types {\n            slot\n          type {\n              url\n            name\n          }\n        }\n        sprites{\n            front_default\n          }\n        message\n        status\n      }\n  }\n`;\n\nexport const GetPokemonDetail = (prop) => {\n    const {match} = prop;\n    let overlay = React.useRef(null);\n    let popup = React.useRef(null);\n    let pokemonname = React.useRef(null);\n    let failedPopup = React.useRef(null);\n    // const [apolloPokemon,setApolloPokemon] = React.useState([])\n    // console.log(match.params.type)\n    let gqlVariables = {\n        name: match.params.type\n    }\n    const {error,data} = useQuery(GET_POKEMON,{\n        variables: gqlVariables\n    })\n    if (error) console.log( `Error! ${error.message}`);\n    \n    React.useEffect(()=>{\n        // console.log(data?.pokemon || [])\n        // setApolloPokemon(data?.pokemon || [])\n        // console.log(apolloPokemon)\n        // console.log(data?.pokemon?.sprites?.front_default || [])\n        if(data?.pokemon || false){\n            if(window.innerWidth < window.innerHeight)\n            document.querySelector(\".details\").style.height= \"36vh\";\n            else\n            document.querySelector(\".details\").style.width= document.documentElement.style.setProperty('--details-width', 32 + \"vw\");\n            setPokemonSpecies(data?.pokemon?.species?.name || \"\");\n            setPokemonImage(data?.pokemon?.sprites?.front_default || \"\")\n            setPokemonMoves(data?.pokemon?.moves || [])\n            setPokemonTypes(data?.pokemon?.types || [])\n        }\n    },[data])\n    // const [cookies] = useCookies(['name',\"mypokemon\"]);\n  \n    const {dispatch,cookies} = React.useContext(AppContext)\n    // const [pokemonDetail,setPokemonDetail] = React.useState(null)\n    const [pokemonMoves,setPokemonMoves] = React.useState(null)\n    const [pokemonTypes,setPokemonTypes] = React.useState(null)\n    const [pokemonImage,setPokemonImage] = React.useState(null)\n    const [pokemonSpecies,setPokemonSpecies] = React.useState(null)\n    // const [randomNumber, setRandomNumber] = React.useState(false)\n    const gotchaClick = (ev) =>{\n        ev.preventDefault();\n        // console.log(cookies?.mypokemon?.filter(a=>a.name===pokemonname.value) || [])\n        if(((cookies?.mypokemon?.filter( a=>a.species===pokemonSpecies).length || []) > 0 && \n        (cookies?.mypokemon?.filter( a=>a.name===pokemonname.value).length || []) > 0) || pokemonname.value===\"\"){\n            if( pokemonname.value===\"\"){\n                alert(\"Name cannot be empty\")\n                return;\n            }\n            \n            alert(\"Please use another name\")\n        }\n        else if(pokemonname.value.length > 10 || false){\n            alert(\"Name length must be less than 10 character\")\n        }\n        else{\n            overlay.style.background = \"rgba(0,0,0,0)\";\n            overlay.style.visibility= \"hidden\";\n            popup.style.visibility= \"hidden\";\n            // console.log(pokemonTypes.map((item)=>item.type.name))\n            dispatch({type: \"myPokemon\", types: pokemonTypes.map((item)=>item.type.name).toString(),species:pokemonSpecies, image:pokemonImage, hash: pokemonname.value});\n        }\n        // console.log(cookies.mypokemon.name.indexOf(pokemonname.value))\n    }\n    const failedClick = (ev) =>{\n        ev.preventDefault();\n        // console.log(cookies.mypokemon.filter(a=>a.name===pokemonname.value))\n        overlay.style.background = \"rgba(0,0,0,0)\";\n        overlay.style.visibility= \"hidden\";\n        failedPopup.style.visibility= \"hidden\";\n        // console.log(cookies.mypokemon.name.indexOf(pokemonname.value))\n    }\n    const catchItClick = () =>{\n        console.log(\"catchit click\");\n        /** 50% chance to get the item */\n        const rand = Math.random() < 0.5\n        console.log(rand)\n        // setRandomNumber(Math.random() < 0.5)\n        if(rand){\n            /**get the pokemon */\n            // console.log(\"how many\")\n            popup.style.visibility = \"visible\";\n            overlay.style.visibility= \"visible\";\n            overlay.style.background = \"rgba(0,0,0,0.7)\";\n            // dispatch({type: \"myPokemon\", image:pokemonImage, hash: prompt(\"Congratulation, You catch the Pokemon!\", \"What do you want to name it?\")});\n            // dispatch({type: \"myPokemon\", hash: \"What do you want to name it?\"});\n        }\n        else{\n            /** didn't get the pokemon */\n            failedPopup.style.visibility = \"visible\";\n            overlay.style.visibility= \"visible\";\n            overlay.style.background = \"rgba(0,0,0,0.7)\";\n        }\n    }\n    // React.useEffect(()=>{\n    //     if(randomNumber){\n    //         /**get the pokemon */\n    //         console.log(\"how many\")\n    //         dispatch({type: \"myPokemon\", hash: prompt(\"Congratulation, You catch the Pokemon!\", \"What do you want to name it?\")});\n    //         // dispatch({type: \"myPokemon\", hash: \"What do you want to name it?\"});\n    //     }\n    //     else{\n    //         /** didn't get the pokemon */\n    //     }\n    // },[randomNumber])\n    let containerItem = React.useRef(null);\n    // const [value, setValue] = React.useState(\"\");\n    // const Element = ({animate}) =>{\n        \n    // }\n\n    // React.useEffect(()=>{\n    //     console.log(match)\n    //     if(match)\n    //     fetch(\"https://pokeapi.co/api/v2/pokemon/\"+match.params.type)\n    //     .then(res=>res.json())\n    //     .then(data=>{\n    //         setPokemonDetail(data)\n    //         if(window.innerWidth < window.innerHeight)\n    //         document.querySelector(\".details\").style.height= \"36vh\";\n    //         else\n    //         document.querySelector(\".details\").style.width= document.documentElement.style.setProperty('--details-width', 32 + \"vw\");\n    //     });\n    // },[match])\n    // React.useEffect(()=>{\n    //     console.log(pokemonDetail)\n    //     if(pokemonDetail){\n    //         setPokemonSpecies(pokemonDetail.species.name);\n    //         setPokemonImage(pokemonDetail.sprites.other['official-artwork'].front_default)\n    //         setPokemonMoves(pokemonDetail.moves)\n    //         setPokemonTypes(pokemonDetail.types)\n    //     }\n    //     // containerItem.style.height= \"36vh\";\n    //     // document.querySelector(\".details\").style.height= \"36vh\";\n    // },[pokemonDetail])\n\n    // console.log(containerItem)\n        // console.log(animate);\n        React.useEffect(()=>{\n            // console.log(\"render\")\n            if(document.querySelector(\".details\")){\n                // animate = \"false\";\n                // containerItem.setAttribute(\"animated\",\"true\")\n                if(window.innerWidth < window.innerHeight)\n                containerItem.style.height= \"36vh\";\n                else\n                containerItem.style.width= document.documentElement.style.setProperty('--details-width', 32 + \"vw\");\n            }\n            // setValue({height: \"26vh\"})\n        },[])\n    return (\n        <>\n        {match ? <div className=\"details-container\">\n            \n            <Link to=\"/pokedex\"><img className=\"back-btn\" src=\"/images/left-arrow.png\" alt=\"close-btn\"/></Link>\n            \n        <h1>{match ? match.params.type : null}</h1>\n            <img className=\"detail-img\" src={pokemonImage} alt={match.params.type+\".png\"}/>\n            <div className=\"overlay\" ref={el => overlay = el}>\n                <div className=\"popup\" ref={el => popup = el}>\n                    <form onSubmit={gotchaClick}>\n                        <h2>Gotcha!</h2>\n                        <input ref={el => pokemonname = el} placeholder=\"Please enter a name!\"/>\n                        <input type=\"submit\"/>\n                    </form>\n                </div>\n                <div className=\"failedpopup\" ref={el => failedPopup = el}>\n                    <form onSubmit={failedClick}>\n                        <h2>PokeBall Failed</h2>\n                        <input type=\"submit\" value=\"dismiss\"/>\n                    </form>\n                </div>\n            </div>\n        <div className=\"details\" ref={el => {containerItem = el}}>\n            {/* <div className=\"color-block\"></div> */}\n            {/* <h2></h2> */}\n            <div className=\"catch-container\" >\n                <button onClick={catchItClick}><h3>Catch it!</h3></button>\n            </div>\n            <h3>Types</h3>\n            {pokemonTypes ? pokemonTypes.map((item,idx)=>{\n                return (\n                    <p key={idx}>{item.type.name}</p>\n                );\n            }) : null}\n            <h3>Moves</h3>\n            {pokemonMoves ? pokemonMoves.map((item,idx)=>{\n                return (\n                    <p key={idx}>{item.move.name}</p>\n                );\n            }) : null}\n\n        </div>\n        </div> : null}\n        </>\n    )\n}\nexport const PokemonDetail = () => {\n    return(\n        <>\n        {/* <h1>Pokemon Detail</h1>\n        <GetPokemonDetail/> */}\n        </>\n    )\n};\n"]},"metadata":{},"sourceType":"module"}